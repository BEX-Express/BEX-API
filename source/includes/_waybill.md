# Waybill 

##Waybill Overview
This service is used to create a waybill shipping entry into the BEX courier database. 
This allows BEX customers to directly interface their shipping requests and helps to 
eliminate errors as a result of manual data capture or misinterpretation of written content 
on shipping documentation.
The service allows for the communication of a number of shipping options, such as:

* Full addressing of both the sending and receiving parties
* Additional shipping references against which the shipping entry is to be tagged
* Multiple packages and their associated dimensions and weights
* Special handling requests such as after-hour deliveries, Saturday or public holiday services

## Waybill URL

Service Relative URL: `/api/service/submitwaybillwia`

### Waybill Parameters

The parameter requirements for this api call have been broken down into three sub-sections,
namely:

* Addresses - Contains parameters for the construction and routing information of the Waybill 
* Dimensioning
* Service Add-Ons

## Addresses

Parameter | FieldType | Case | Required | Note
--------- | --------- | ---- | ---------| ---- 
AccountNumber | String | No | Yes | 
SendersRef | String | No | No | Used for tracking, reporting and invoice requests
WaybillNumber | String | No(See below) | No | BEX issued number

>Found on documentation completed for this shipping request. If making use of
alternative shipping stationary options such as thermal labels or A4 waybills, 
this number will be auto-generated by BEX and communicated in the service response.

Parameter | FieldType | Case | Required | Note
--------- | --------- | ---- | -------- | ---- 
WaybillDate | Date | No | No | Date of collection by BEX. Format yyyy-mm-dd
ServiceCode | String | No | Yes | The service delivery priority code
 
Service codes  values are:

* SDX - Sameday Express
* DBD - Daybreak Delivery
* ONC - Overnight Courier
* NCA - Normal Cargo
* BUD - Budget Cargo

Parameter | FieldType | Case | Required | Note
--------- | --------- | ---- | -------- | ------- 
OriginCompany | String | No | No | Name of company where the collection will take place
OriginFloorBuilding | String | No | Yes | Floor number, building, office park for collection
OriginStreet | String | No | Yes | Street name for the collection of the shipment
OriginLocationName | String | No | Yes | Suburb of senders address
OriginPostCode | String | No | Yes | Postcode of the senders address
SenderContactName | String | No | No | Contact person for collection/dispatch of the goods
SenderTelephone | String | No | No | Telephone number of contact person for collection/dispatch
SenderMobile | String | No | No | Mobile number of the contact person for collection/dispatch.

> Useful for shipment progress updates

Parameter | FieldType | Case | Required | Note
--------- | --------- | ---- | -------- | ------- 
SenderEmail | String | No | No | Useful for updates of shipment progress
DestinationCompany | String | No | No | Private Individual or company name of recipiant
DestinationFloorBuilding | String | No | No | Receiver's floor and building address. Optional if single receiver.
DestinationStreet | String | No | No | Receiver's street number and name
The street number and name of the receiver. It follows the same logic as the OriginStreet field.
DestinationLocationName | String | No | Yes | Receiver's suburb .
DestinationPostCode | String | Yes | No | Receiver's postcode
ReceiverContactName | String | No | No | Receiver's name.
ReceiverTelephone | String | No | No | Receiver's telephone number
ReceiverMobile | String | No | No | Receiver's mobile number. Useful for status updates
ReceiverEmail | String | No | No | Receiver's email address. Useful for status updates
InsuranceRequired | Boolean | No | No | If TRUE the insurance surcharge is added to the waybill and the goods are covered during shipping
InsuranceValue | Float/Double | No | No | Insured value, in ZAR

## Dimensioning

## Service Add-Ons

## Waybill Transportation

> Javascript / jQuery Example.

```javascript
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>BEX waybill API example</title>
<script src="http://code.jquery.com/jquerylatest.min.js" type="text/javascript"></script>
</head>
<body>
<script type="text/javascript">
//********** Login Service Call ********************
var tokenStr = '';
var user = encodeURIComponent('someusername'); //encode the username
var pass = encodeURIComponent('somepassword'); //encode the password
var host = 'http://dev.bex.co.za';
//********** Submit Waybill Service Call ***********
// ADDRESSING
var postData = {}
postData.accountNumber = '111983';
postData.waybillNumber = 'IT2701152404';
postData.waybillDate = '20150127';
postData.sendersRef = 'WE HAVE A REFERENCE';
postData.serviceCode = 'NCA';
// SENDER ADDRESS
postData.originCompany = 'THE BOEING COMPANY';
postData.originFloorBuilding = 'UNIT 6 ASSEMBLY BUILDING';
postData.originStreet = '21 AIRCRAFT LANE';
postData.originLocationName = 'MARLBORO';
postData.originPostCode = '2050';
postData.senderContactName = 'JONATHAN';
postData.senderTelephone = '0119299700';
postData.senderMobile = '0821234321';
postData.senderEmail = 'JONATHAN@BOEING.COM';
// DESTINATION ADDRESS
postData.destinationCompany = 'THE AIRLINER CO';
postData.destinationFloorBuilding = '1ST FLOOR HEAD OFFICE';
postData.destinationStreet = '21 TULP STREET';
postData.destinationLocationName = 'MILNERTON';
postData.destinationPostCode = '7401';
postData.receiverContactName = 'DEREK';
postData.receiverTelephone = '0218641202';
postData.receiverMobile = '0833211234';
postData.receiverEmail = 'DEREK@THEAIRLINER.COM';
// GENERAL
postData.insuranceRequired = true;
postData.insuranceValue = 1000;
postData.instructions = 'DO NOT INVERT COMPONENT';
// PIECE INFORMATION
var totalPieces = 2;
var actualWeight = 12.3;
BEX Express (Pty) Ltd
Webservice Integrations Private & Confidential Page 13 of 15
Revised: 27 January 2015
// ADDITIONAL REFERENCES
var additionalReferences = [];
var reference1 = {};
reference1.value = 'REFERENCE ONE';
additionalReferences.push(reference1);
postData.AdditionalReferneces = additionalReferences;
// DIMENSIONING
var dims = [];
var firstDim = {};
firstDim.barcodeNumber = postData.waybillNumber + 'P1';
firstDim.Dimension1 = 10;
firstDim.Dimension2 = 20;
firstDim.Dimension3 = 30;
firstDim.Weight = 12.3;
firstDim.Reference = 'AIRFRAME COMPONENT';
dims.push(firstDim);
postData.Dimensions = dims;
var jsonData = JSON.stringify(postData);
jQuery.support.cors = true; //this will enable cross domain access for
all services
//call the service using jQuery ajax and passing the parameters
$.ajax({
url: host + '/api/service/login?username=' + user + '&password=' + pass, type: 'POST',
async: false, //dont run asynchronously
success: function (data) {
if (data.ex) { //if the network call succeeds, it may still contain an error (ex)
alert('The following error occured: ' + data.ex); //display the error
return;
}
tokenStr = data.value;
},
error: function (ex) { //this will fire for network related issues
alert(ex.responseText);
}
});
//call the service using jQuery ajax and passing the parameters
$.ajax({
type: 'POST',
BEX Express (Pty) Ltd
Webservice Integrations Private & Confidential Page 14 of 15
Revised: 27 January 2015
url: host + '/api/service/submitwaybillwia',
data: jsonData,
dataType: 'json',
contentType: 'application/json; charset=UTF8',
beforeSend: function (xhr) {
xhr.setRequestHeader('token', tokenStr);
},
success: function (data) {
if (data.ex) {
document.write('An error occured: ' + data.ex);
} else {
document.write('A waybill entry was successfully created');
}
},
error: function (ex) { //this will fire for network related issues
alert(ex.responseText);
}
});
</script>
</body>
</html>
```


The service supports GET and POST requests.We recommend POST requests to avoid caching issues.
The service supports URL parameters or JSON parameters in the message body

Example Service Call using JSON message body

* URL: `http://insight.bex.co.za/api/service/submitbexcollection`
* BODY: `{“accountNumber”:”112311”,”waybillNumber”:”ABC123456”, “waybillDate”:”2014-12-16”….. etc….. }`


<aside class="notice">
    Please note that all fields must be URL encoded if special characters are used.

</aside>

Should you experience any difficulties in the implementation of this service please contact BEX
Head Office in Johannesburg on +2711 929 9700 and ask for a member of I.T who will gladly assist
you.
