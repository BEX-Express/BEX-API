# Waybill 

##Waybill Overview
This service is used to create a waybill shipping entry into the BEX courier database. 
This allows BEX customers to directly interface their shipping requests and helps to 
eliminate errors as a result of manual data capture or misinterpretation of written content 
on shipping documentation.
The service allows for the communication of a number of shipping options, such as:

* Full addressing of both the sending and receiving parties
* Additional shipping references against which the shipping entry is to be tagged
* Multiple packages and their associated dimensions and weights
* Special handling requests such as after-hour deliveries, Saturday or public holiday services

## Waybill URL

Service Relative URL: `/api/service/submitwaybillwia`

### Waybill Parameters

The parameter requirements for this api call have been broken down into three sub-sections,
namely:

* Addresses - Contains parameters for the construction and routing information of the Waybill 
* Dimensioning
* Service Add-Ons

## Addresses

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
AccountNumber | String | Yes | No | 1110123
Bex account number to which shipment costs will be allocated

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
SendersRef | String | No | No | Order123-456
Shippers reference linked to the database. This reference can be used for tracking, reporting and invoice requests

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
WaybillNumber | String | No(See below) | No | ABC123456
The waybill number is the BEX issued number printed on the respective waybill documentation
that is being completed for this shipping request. If you are integrating and make use of
alternative shipping stationary options such as thermal labels or A4 waybills, this number will be
auto-generated by BEX and communicated in the service response.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
WaybillDate | Date | No(See Below) | No | 2020-07-17
The date on which the requested shipping entry is to be collected by BEX Express. It is formatted
as yyyy-mm-dd.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
ServiceCode | String | Yes | No | NCA

The service delivery priority requested for this shipment. Typical service codes are as follows:

* ● SDX - Sameday Express
* ● DBD - Daybreak Delivery
* ● ONC- Overnight Courier
* ● NCA - Normal Cargo
* ● BUD - Budget Cargo

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
OriginCompany | String | No | No | BOEING AITCRAFT CORPORATION
The name of the company where the collection is to take place. Please note this is not necessarily
the company name of the person requesting the collection, but rather the name of the company
where BEX will go so as to collect the goods.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
OriginFloorBuilding | String | Yes | No | Unit 6 The Broads Office Park
Information such as floor number, building and office park name can be entered into this field.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
OriginStreet | String | Yes | No | 120 Loper Avenue
The place number and street of the sender of the shipment. Please note this is not the same as the
address of the account holder, but rather the shipments “departure address”

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
OriginLocationName | String | Yes | No | Rosebank
The suburb name of the senders address.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
OriginPostCode | String | Yes | No | 2054
The postcode of the senders address.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
SenderContactName | String | No | No | JONATHAN
The name of the contact person where the collection/dispatch of the goods will take place.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
SenderTelephone | String | No | No | +27119292345
The telephone number of the contact person where the collection/dispatch will take place.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
SenderMobile | String | No | No | 0829091234
The mobile number of the contact person where the collection/dispatch will take place. This field
is beneficial as the sender will be kept abreast of up to the minute news concerning the progress
of the shipment as it routes through the BEX network.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
SenderEmail | String | No | No | JONATHAN@AIRLINER.COM
The email address of the contact person where the collection/dispatch will take place. Same as the
SenderMobile field, the email address is beneficial as the sender will be kept abreast of up to the
minute new concerning the progress of the collection request.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
DestinationCompany | String | No | No | GENERAL ELECTRIC
The company name of the receiving party. Should the receiver be a private individual, their name
and surname details can be specified.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
DestinationFloorBuilding | String | No | No | BLOCK B 1ST Floor
The floor and building address information of the receiver. Similar to the receiver company
name, this can only be optionally supplied if there is a single receiver for the goods to be
collected.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
DestinationStreet | String | No | No | 16 COMMISIONER STREET
The street number and name of the receiver. It follows the same logic as the OriginStreet field.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
DestinationLocationName | String | Yes | No | MILNERTON
The name of the suburb where delivery will take place.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
DestinationPostCode | String | Yes | No | 7435
The postcode of the suburb specified in the DestinationLocationName parameter.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
ReceiverContactName | String | No | No | Neil
The name of the contact person who is to receive the goods at delivery time.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
ReceiverTelephone | String | No | No | 0114523454
The telephone number of the contact person who is to receive the goods at delivery time

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
ReceiverMobile | String | No | No | 0823241234
The mobile number of the contact person who is to receive the goods at delivery time. This
information is beneficial as the receiver will receive status updates as to the progress of the goods
whilst they are being routed through the BEX network.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
ReceiverEmail | String | No | No | DEREK@BOEING.COM
The mobile number of the contact person who is to receive the goods at delivery time. This
information is beneficial as the receiver will receive status updates as to the progress of the goods
whilst they are being routed through the BEX network.

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
InsuranceRequired | BOOLEAN | No | No | TRUE
A Boolean flag that can be set should the requestor request insurance for the routing of the
packages once they have been collected by BEX. Should this Boolean field be set then the waybills
created for the shipping of the goods will carry an insurance surcharge that covers the premium
payable so as to have insurance cover during the shipping of the goods

Parameter | FieldType | Required | Case | Example
--------- | --------- | -------- | ---- | ------- 
InsuranceValue | FLOAT/DOUBLE | No | No | 1500
The insured value, in ZAR, of the goods at which the insurance cover will cater for.



## Waybill Transportation

>Javascript / jQuery Example.

```javascript/jQuery Example
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>BEX waybill API example</title>
<script src="http://code.jquery.com/jquerylatest.min.js" type="text/javascript"></script>
</head>
<body>

<script type="text/javascript">
//***************************** Login Service Call
***********************************
var tokenStr = '';
var user = encodeURIComponent('someusername')
; //encode the username
var pass = encodeURIComponent('somepassword')
; //encode the password
var host = 'http://dev.bex.co.za';
//***************************** Submit Waybill Service Call
***********************************
// ADDRESSING
var postData = {}
postData.accountNumber = '111983';
postData.waybillNumber = 'IT2701152404';
postData.waybillDate = '20150127'
;
postData.sendersRef = 'WE HAVE A REFERENCE';
postData.serviceCode = 'NCA';
// SENDER ADDRESS
postData.originCompany = 'THE BOEING COMPANY';
postData.originFloorBuilding = 'UNIT 6 ASSEMBLY BUILDING';
postData.originStreet = '21 AIRCRAFT LANE';
postData.originLocationName = 'MARLBORO';
postData.originPostCode = '2050';
postData.senderContactName = 'JONATHAN';
postData.senderTelephone = '0119299700';
postData.senderMobile = '0821234321';
postData.senderEmail = 'JONATHAN@BOEING.COM';
// DESTINATION ADDRESS
postData.destinationCompany = 'THE AIRLINER CO';
postData.destinationFloorBuilding = '1ST FLOOR HEAD OFFICE';
postData.destinationStreet = '21 TULP STREET';
postData.destinationLocationName = 'MILNERTON';
postData.destinationPostCode = '7401';
postData.receiverContactName = 'DEREK';
postData.receiverTelephone = '0218641202';
postData.receiverMobile = '0833211234';
postData.receiverEmail = 'DEREK@THEAIRLINER.COM';
// GENERAL
postData.insuranceRequired = true;
postData.insuranceValue = 1000;
postData.instructions = 'DO NOT INVERT COMPONENT';
// PIECE INFORMATION
var totalPieces = 2;
var actualWeight = 12.3;
BEX Express (Pty) Ltd
Webservice Integrations Private & Confidential Page 13 of 15
Revised: 27 January 2015
// ADDITIONAL REFERENCES
var additionalReferences = [];
var reference1 = {};
reference1.value = 'REFERENCE ONE';
additionalReferences.push(reference1);
postData.AdditionalReferneces = additionalReferences;
// DIMENSIONING
var dims = [];
var firstDim = {};
firstDim.barcodeNumber = postData.waybillNumber + 'P1'
;
firstDim.Dimension1 = 10;
firstDim.Dimension2 = 20;
firstDim.Dimension3 = 30;
firstDim.Weight = 12.3;
firstDim.Reference = 'AIRFRAME COMPONENT';
dims.push(firstDim);
postData.Dimensions = dims;
var jsonData = JSON.stringify(postData);
jQuery.support.cors = true; //this will enable cross domain access for
all services
//call the service using jQuery ajax and passing the parameters
$.ajax({
url: host + '/api/service/login?username=' + user + '&password=' + pass,
type: 'POST',
async: false, //dont run asynchronously
success: function (data) {
if (data.ex) { //if the network call succeeds, it may still contain an
error (ex)
alert('The following error occured: ' + data.ex); //display the error
return;
}
tokenStr = data.value;
},
error: function (ex) { //this will fire for network related issues
alert(ex.responseText);
}
});
//call the service using jQuery ajax and passing the parameters
$.ajax({
type: 'POST',
BEX Express (Pty) Ltd
Webservice Integrations Private & Confidential Page 14 of 15
Revised: 27 January 2015
url: host + '/api/service/submitwaybillwia',
data: jsonData,
dataType: 'json',
contentType: 'application/json; charset=UTF8',
beforeSend: function (xhr) {
xhr.setRequestHeader('token', tokenStr);
},
success: function (data) {
if (data.ex) {
document.write('An error occured: ' + data.ex);
} else {
document.write('A waybill entry was successfully
created');
}
},
error: function (ex) { //this will fire for network related issues
alert(ex.responseText);
}
});
</script>
</body>
</html>
```


The service supports GET and POST requests.We recommend POST requests to avoid caching issues.
The service supports URL parameters or JSON parameters in the message body

Example Service Call using JSON message body

* URL: `http://insight.bex.co.za/api/service/submitbexcollection`
* BODY: `{“accountNumber”:”112311”,”waybillNumber”:”ABC123456”, “waybillDate”:”2014-12-16”….. etc….. }`


<aside class="notice">
    Please note that all fields must be URL encoded if special characters are used.

</aside>

Should you experience any difficulties in the implementation of this service please contact BEX
Head Office in Johannesburg on +2711 929 9700 and ask for a member of I.T who will gladly assist
you.
